<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ  Home Space Reflection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>

<!-- ================= HEADER ================= -->
<header>
  <h1>ğŸ  Home Space Reflection</h1>
  <p>
    A simple way to reflect on how different parts of a home
    influence people and family dynamics.
  </p>
</header>

<!-- ================= MAIN ================= -->
<main>

  <!-- ---------- INPUT PANEL ---------- -->
  <section class="inputs">
    <h2>ğŸ§­ Space Details</h2>

    <!-- Direction -->
    <label>Room Direction</label>
    <div class="direction-grid">
      <button data-dir="NW">â†– NW</button>
      <button data-dir="N">â†‘ N</button>
      <button data-dir="NE">â†— NE</button>

      <button data-dir="W">â† W</button>
      <button data-dir="C">â€¢</button>
      <button data-dir="E">â†’ E</button>

      <button data-dir="SW">â†™ SW</button>
      <button data-dir="S">â†“ S</button>
      <button data-dir="SE">â†˜ SE</button>
    </div>

    <!-- Room Type -->
    <label>Room Type</label>
    <select id="roomType">
      <option>Bedroom</option>
      <option>Living Room</option>
      <option>Study / Office</option>
      <option>Kitchen</option>
      <option>Other</option>
    </select>

    <!-- Main User -->
    <label>Main User of This Room</label>
    <select id="role">
      <option value="you">You</option>
      <option value="partner">Partner</option>
      <option value="child">Child</option>
      <option value="parent">Parent</option>
      <option value="sibling">Sibling</option>
      <option value="other">Other</option>
    </select>

    <!-- Relationship Focus -->
    <label>Relationship Focus</label>
    <select id="relation">
      <option value="partner">Partner</option>
      <option value="child">Child</option>
      <option value="parent">Parent</option>
      <option value="sibling">Sibling</option>
      <option value="family">Family in general</option>
    </select>

    <!-- Shared -->
    <label class="checkbox">
      <input type="checkbox" id="shared" />
      Shared space with you
    </label>

    <!-- Action -->
    <button id="analyze">ğŸ” Reflect on This Space</button>
  </section>

  <!-- ---------- OUTPUT PANEL ---------- -->
  <section class="output">
    <h2>ğŸŒŠ Reflection</h2>

    <div id="result">
      <p class="placeholder">
        Select the details on the left to see how this space
        may influence the people and relationships connected to it.
      </p>
    </div>
  </section>

</main>

<!-- ================= FOOTER ================= -->
<footer>
  <p>
    ğŸ’¬ For a full one-to-one reading, please reach out on IG:
    <strong>@lumistudio2025</strong>
  </p>
</footer>

<!-- ================= SCRIPT ================= -->
<script src="assets/js/engine.js"></script>
<script>
  let selectedDirection = null;

  // Direction selection
  document.querySelectorAll(".direction-grid button").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll(".direction-grid button")
        .forEach(b => b.classList.remove("active"));

      btn.classList.add("active");
      selectedDirection = btn.dataset.dir;
    });
  });

  // Analyze
  document.getElementById("analyze").addEventListener("click", async () => {
    if (!selectedDirection) {
      alert("Please select a room direction.");
      return;
    }

    const result = await TerraEngine.getRoomReading({
      direction: selectedDirection,
      roomSeed: 1,
      roomType: document.getElementById("roomType").value,
      role: document.getElementById("role").value,
      relation: document.getElementById("relation").value,
      shared: document.getElementById("shared").checked
    });

    document.getElementById("result").innerHTML = `
      <p><strong>ğŸ§­ Space Nature</strong><br>${result.summary}</p>
      <p><strong>ğŸ‘¤ Impact on Person</strong><br>${result.homeImpact}</p>
      <p><strong>ğŸ‘¥ Relationship Influence</strong><br>${result.relationshipImpact}</p>
    `;
  });
</script>

</body>
</html>
