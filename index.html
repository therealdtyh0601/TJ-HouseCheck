<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Home Space Reflection</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>

<header>
  <h1>ğŸ  Home Space Reflection</h1>
  <p>
    A quiet way to reflect on how different parts of a home influence people
    and family dynamics.
  </p>
</header>

<main>
  <section class="inputs">
    <h2>ğŸ§­ Space Details</h2>

    <label>Room Direction</label>
    <div class="direction-grid">
      <button data-dir="NW">â†– NW</button>
      <button data-dir="N">â†‘ N</button>
      <button data-dir="NE">â†— NE</button>
      <button data-dir="W">â† W</button>
      <button data-dir="C">â€¢</button>
      <button data-dir="E">â†’ E</button>
      <button data-dir="SW">â†™ SW</button>
      <button data-dir="S">â†“ S</button>
      <button data-dir="SE">â†˜ SE</button>
    </div>

    <label>Room Type</label>
    <select id="roomType">
      <option>Bedroom</option>
      <option>Living Room</option>
      <option>Study / Office</option>
      <option>Kitchen</option>
      <option>Other</option>
    </select>

    <label>Main User of This Room</label>
    <select id="role">
      <option value="you">You</option>
      <option value="partner">Partner</option>
      <option value="child">Child</option>
      <option value="parent">Parent</option>
      <option value="sibling">Sibling</option>
      <option value="other">Other</option>
    </select>

    <label>Relationship Focus</label>
    <select id="relation">
      <option value="partner">Partner</option>
      <option value="child">Child</option>
      <option value="parent">Parent</option>
      <option value="sibling">Sibling</option>
      <option value="family">Family in general</option>
    </select>

    <label>
      <input type="checkbox" id="shared" />
      Shared space with you
    </label>

    <button id="analyze">ğŸ” Reflect on This Space</button>
  </section>

  <section class="output">
    <h2>ğŸŒŠ Reflection</h2>
    <div id="result">
      <p class="placeholder">
        Select the details on the left to see how this space may influence
        the people and relationships connected to it.
      </p>
    </div>
  </section>
</main>

<footer>
  <p>
    ğŸ’¬ For a full one-to-one reading, reach out on IG:
    <strong>@lumistudio2025</strong>
  </p>
</footer>

<script src="assets/js/engine.js"></script>
<script>
let selectedDirection = null;

document.querySelectorAll(".direction-grid button").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".direction-grid button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    selectedDirection = btn.dataset.dir;
  });
});

document.getElementById("analyze").addEventListener("click", async () => {
  if (!selectedDirection) {
    alert("Please select a room direction.");
    return;
  }

  const data = await TerraEngine.getRoomReading({
    direction: selectedDirection,
    roomSeed: 1,
    role: document.getElementById("role").value,
    relation: document.getElementById("relation").value,
    shared: document.getElementById("shared").checked
  });

  document.getElementById("result").innerHTML = `
    <p><strong>ğŸ§­ Space Nature</strong><br>${data.summary}</p>
    <p><strong>ğŸ‘¤ Impact on Person</strong><br>${data.homeImpact}</p>
    <p><strong>ğŸ‘¥ Relationship Influence</strong><br>${data.relationshipImpact}</p>
  `;
});
</script>
</body>
</html>
